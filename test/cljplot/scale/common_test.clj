(ns cljplot.scale.common-test
  (:require [cljplot.scale.common :refer :all]
            [fastmath.core :as m]
            [clojure.test :refer :all]))

(deftest tick-step-basics
  (is (= 0.0 (tick-step 1 1 1)))
  (is (= 0.0 (tick-step 1 1 10)))
  (is (= ##Inf (tick-step 0 1 -1)))
  (is (= ##Inf (tick-step 0 1 0))))

(deftest tick-step-value
  (is (m/approx-eq 0.1 (tick-step 0 1 10)))
  (is (m/approx-eq 0.1 (tick-step 0 1 9)))
  (is (m/approx-eq 0.1 (tick-step 0 1 8)))
  (is (m/approx-eq 0.2 (tick-step 0 1 7)))
  (is (m/approx-eq 0.2 (tick-step 0 1 6)))
  (is (m/approx-eq 0.2 (tick-step 0 1 5)))
  (is (m/approx-eq 0.2 (tick-step 0 1 4)))
  (is (m/approx-eq 0.5 (tick-step 0 1 3)))
  (is (m/approx-eq 0.5 (tick-step 0 1 2)))
  (is (m/approx-eq 1.0 (tick-step 0 1 1)))
  (is (m/approx-eq 1 (tick-step 0 10 10)))
  (is (m/approx-eq 1 (tick-step 0 10 9)))
  (is (m/approx-eq 1 (tick-step 0 10 8)))
  (is (m/approx-eq 2 (tick-step 0 10 7)))
  (is (m/approx-eq 2 (tick-step 0 10 6)))
  (is (m/approx-eq 2 (tick-step 0 10 5)))
  (is (m/approx-eq 2 (tick-step 0 10 4)))
  (is (m/approx-eq 5 (tick-step 0 10 3)))
  (is (m/approx-eq 5 (tick-step 0 10 2)))
  (is (m/approx-eq 10 (tick-step 0 10 1)))
  (is (m/approx-eq 2 (tick-step -10 10 10)))
  (is (m/approx-eq 2 (tick-step -10 10 9)))
  (is (m/approx-eq 2 (tick-step -10 10 8)))
  (is (m/approx-eq 2 (tick-step -10 10 7)))
  (is (m/approx-eq 5 (tick-step -10 10 6)))
  (is (m/approx-eq 5 (tick-step -10 10 5)))
  (is (m/approx-eq 5 (tick-step -10 10 4)))
  (is (m/approx-eq 5 (tick-step -10 10 3)))
  (is (m/approx-eq 10 (tick-step -10 10 2)))
  (is (m/approx-eq 20 (tick-step -10 10 1))))

(deftest tick-step-reverse
  (is (= (tick-step 0 1 10) (- (tick-step 1 0 10))))
  (is (= (tick-step 0 1 9) (- (tick-step 1 0 9))))
  (is (= (tick-step 0 1 8) (- (tick-step 1 0 8))))
  (is (= (tick-step 0 1 7) (- (tick-step 1 0 7))))
  (is (= (tick-step 0 1 6) (- (tick-step 1 0 6))))
  (is (= (tick-step 0 1 5) (- (tick-step 1 0 5))))
  (is (= (tick-step 0 1 4) (- (tick-step 1 0 4))))
  (is (= (tick-step 0 1 3) (- (tick-step 1 0 3))))
  (is (= (tick-step 0 1 2) (- (tick-step 1 0 2))))
  (is (= (tick-step 0 1 1) (- (tick-step 1 0 1))))
  (is (= (tick-step 0 10 10) (- (tick-step 10 0 10))))
  (is (= (tick-step 0 10 9) (- (tick-step 10 0 9))))
  (is (= (tick-step 0 10 8) (- (tick-step 10 0 8))))
  (is (= (tick-step 0 10 7) (- (tick-step 10 0 7))))
  (is (= (tick-step 0 10 6) (- (tick-step 10 0 6))))
  (is (= (tick-step 0 10 5) (- (tick-step 10 0 5))))
  (is (= (tick-step 0 10 4) (- (tick-step 10 0 4))))
  (is (= (tick-step 0 10 3) (- (tick-step 10 0 3))))
  (is (= (tick-step 0 10 2) (- (tick-step 10 0 2))))
  (is (= (tick-step 0 10 1) (- (tick-step 10 0 1))))
  (is (= (tick-step -10 10 10) (- (tick-step 10 -10 10))))
  (is (= (tick-step -10 10 9) (- (tick-step 10 -10 9))))
  (is (= (tick-step -10 10 8) (- (tick-step 10 -10 8))))
  (is (= (tick-step -10 10 7) (- (tick-step 10 -10 7))))
  (is (= (tick-step -10 10 6) (- (tick-step 10 -10 6))))
  (is (= (tick-step -10 10 5) (- (tick-step 10 -10 5))))
  (is (= (tick-step -10 10 4) (- (tick-step 10 -10 4))))
  (is (= (tick-step -10 10 3) (- (tick-step 10 -10 3))))
  (is (= (tick-step -10 10 2) (- (tick-step 10 -10 2))))
  (is (= (tick-step -10 10 1) (- (tick-step 10 -10 1)))))

